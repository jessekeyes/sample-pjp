function lazyload(){loading||(loading=!0,jQuery.ajax({url:wpURLs.ajaxurl,type:"post",data:{action:"ajax_filter",query_vars:filter.serialize(),page:page},beforeSend:function(){jQuery(".load-more").addClass("lazy-hide"),jQuery(".loader").removeClass("lazy-hide"),jQuery(".wrapper-posts .is_lastpage").remove()},success:function(html){jQuery(".wrapper-posts #loader").remove(),$wrapper.append(html),$wrapper.imagesLoaded(function(){$wrapper.masonry("reloadItems").masonry("layout")}),setTimeout(function(){jQuery(".item").css("opacity","1")},300),page+=1,loading=!1,lastpage=jQuery(".wrapper-posts .is_lastpage").data("lastpage"),jQuery(".load-more-action, .rule-loading").addClass("cloak"),jQuery(".load-more").removeClass("lazy-hide"),jQuery(".loader").addClass("lazy-hide"),lastpage&&pagination.remove()}}))}var pagination=jQuery(".pagination"),filter=jQuery("#filter"),wrapper=jQuery(".wrapper-posts"),postType=JSON.parse(wpURLs.query_vars),morePrompt="event"==postType.post_type?"Events":"Stories",button='<div class="load-more"><hr class="rule-loading" /><a href="#" class="button load-more-action">Load More '+morePrompt+'</a><hr class="rule-loading" /></div>',page=2,loading=!1,lastpage=jQuery(".is_lastpage").length>0?jQuery(".is_lastpage").data("lastpage"):1,masonryOptions={itemSelector:".item",gutter:".gutter-sizer",transitionPropery:"opacity",hiddenStyle:{opacity:0},visibleStyle:{opacity:1},transitionDuration:0},$wrapper=wrapper.masonry(masonryOptions);jQuery("#start_date").val()||jQuery("#end_date").val()||jQuery("#filter #month_date").val()||jQuery("#filter #cat").val()?jQuery('#filter input[type="reset"]').removeClass("disabled"):jQuery('#filter input[type="reset"]').addClass("disabled"),lastpage||(pagination.show(),pagination.append(button)),pagination.on("click",jQuery("load-more-action"),function(event){event.preventDefault(),lazyload()}),jQuery(".button-reset").on("click",function(event){event.preventDefault(),jQuery("#filter #cat, #filter #m, #filter #month_date, #query_end_date, #query_start_date, #end_date, #start_date").val(""),filter.trigger("change")}),filter.on("change",function(event){filter.addClass("loading"),wrapper.hasClass("not-found")?window.location.href="/?"+filter.serialize():setTimeout(function(){jQuery.ajax({url:wpURLs.ajaxurl,type:"post",data:{action:"ajax_filter",query_vars:filter.serialize(),page:1},beforeSend:function(){jQuery(".wrapper-posts").find(".item").remove(),jQuery(".wrapper-posts .is_lastpage").remove(),jQuery(document).scrollTop(),jQuery(".wrapper-posts").append('<div class="page-content" id="loader"><div class="loader"><div></div><div></div></div></div>')},success:function(html){jQuery(".wrapper-posts #loader").remove(),filter.removeClass("loading"),jQuery("#start_date").val()||jQuery("#end_date").val()||jQuery("#filter #month_date").val()||jQuery("#filter #cat").val()?jQuery('#filter input[type="reset"]').removeClass("disabled"):jQuery('#filter input[type="reset"]').addClass("disabled"),$wrapper.append(html).masonry("reloadItems").masonry("layout"),jQuery(".item").css("opacity","1"),$wrapper.imagesLoaded(function(){$wrapper.masonry("reloadItems").masonry("layout")}),page=2,lastpage=jQuery(".wrapper-posts .none-found").length>0?1:jQuery(".is_lastpage").data("lastpage"),lastpage?jQuery(".pagination").hide():(jQuery(".pagination").show(),jQuery(".load-more-action, .rule-loading").removeClass("cloak"),0==jQuery(".load-more").length&&pagination.append(button),jQuery(".load-more").removeClass("lazy-hide"),jQuery(".loader").addClass("lazy-hide"))}})},300)}),jQuery("#start_date").datepicker({dateFormat:"m/d/yy",minDate:0,altField:"#query_start_date",altFormat:"yy-mm-dd",showButtonPanel:!0,closeText:"Clear",onClose:function(dateText,obj){jQuery(window.event.srcElement).hasClass("ui-datepicker-close")&&(jQuery("#start_date").val(""),jQuery("#query_start_date").val(""),filter.trigger("change"))}}),jQuery("#end_date").datepicker({dateFormat:"m/d/yy",minDate:0,altField:"#query_end_date",altFormat:"yy-mm-dd",showButtonPanel:!0,closeText:"Clear",onClose:function(dateText,obj){jQuery(window.event.srcElement).hasClass("ui-datepicker-close")&&(jQuery("#end_date").val(""),jQuery("#query_end_date").val(""),filter.trigger("change"))}}),jQuery("#start_date").on("change",function(){jQuery(this).val()||jQuery("#query_start_date").val("")}),jQuery("#end_date").on("change",function(){jQuery(this).val()||jQuery("#query_end_date").val("")}),jQuery(window).on("load resize orientationchange",function(){jQuery(".item").css("opacity","1"),jQuery(this).width()>=768?$wrapper.masonry(masonryOptions):$wrapper.masonry("destroy")}),jQuery("#month_date").on("change",function(){var yearmonth=jQuery(this).val();yearmonth=yearmonth.replace(/\D/g,""),jQuery("#m").val(yearmonth)});
//# sourceMappingURL=wp-content/themes/pjg/assets/js/filter.js.map